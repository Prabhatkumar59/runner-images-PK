name: WSL1 Test on windows-2025

on: [push, pull_request]

jobs:
  wsl1-job:
    runs-on: windows-2025

    steps:
    - name: Set WSL default version to 1
      run: |
        wsl --set-default-version 1

    - name: Install Ubuntu with WSL1
      run: |
        wsl --install -d Ubuntu --no-launch
        timeout /t 10

    - name: Verify WSL Version
      run: |
        wsl -l -v

    - name: Run script in WSL1 (Ubuntu)
      run: |
        wsl -d Ubuntu sh -c "echo 'Inside WSL1'; uname -a; lsb_release -a"

    - name: Install curl and test internet in WSL
      run: |
        wsl -d Ubuntu sh -c "sudo apt-get update && sudo apt-get install -y curl && curl -s https://api.github.com"
