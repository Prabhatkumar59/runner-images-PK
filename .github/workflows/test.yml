name: Check Alibaba Cloud CLI Version on Multiple OS

on:
  workflow_dispatch:

jobs:
  check-aliyun-ubuntu22:
    name: Ubuntu 22.04
    runs-on: ubuntu-22.04
    steps:
      - name: Check aliyun CLI version
        run: |
          if command -v aliyun > /dev/null; then
            echo "Alibaba Cloud CLI is installed."
            aliyun --version
          else
            echo "Alibaba Cloud CLI is NOT installed."
            exit 1
          fi

  check-aliyun-win2019:
    name: Windows Server 2019
    runs-on: windows-2019
    steps:
      - name: Check aliyun CLI version
        shell: pwsh
        run: |
          if (Get-Command aliyun -ErrorAction SilentlyContinue) {
            Write-Host "Alibaba Cloud CLI is installed."
            aliyun --version
          } else {
            Write-Host "Alibaba Cloud CLI is NOT installed."
            exit 1
          }

  check-aliyun-win2022:
    name: Windows Server 2022
    runs-on: windows-2022
    steps:
      - name: Check aliyun CLI version
        shell: pwsh
        run: |
          if (Get-Command aliyun -ErrorAction SilentlyContinue) {
            Write-Host "Alibaba Cloud CLI is installed."
            aliyun --version
          } else {
            Write-Host "Alibaba Cloud CLI is NOT installed."
            exit 1
          }
